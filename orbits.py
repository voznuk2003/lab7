import numpy as np
import matplotlib.pyplot as plt

# Параметры для первого набора кривых
# Уравнение конического сечения в полярных координатах: r = p/(1 + e*cos(θ))
# p - фокальный параметр (определяет размер кривой)
# e - эксцентриситет (определяет тип кривой):
#   e = 0 - окружность
#   0 < e < 1 - эллипс
#   e = 1 - парабола
#   e > 1 - гипербола

# Первая кривая: почти окружность (малый эксцентриситет)
p0 = 3  # фокальный параметр
e0 = 0.1  # эксцентриситет (близко к 0 → почти окружность)

# Вторая кривая: эллипс
p1 = 3
e1 = 0.3

# Третья кривая: более вытянутый эллипс
p2 = 3
e2 = 0.5

# Четвертая кривая: сильно вытянутый эллипс
p3 = 3
e3 = 0.7

# Пятая кривая: эллипс, близкий к параболе
p4 = 3
e4 = 0.9

N = 256  # количество точек для построения
V = np.linspace(-2*np.pi, 2*np.pi, N)  # угловой диапазон: полные 2 оборота (-2π до 2π)

# Вычисление радиусов для каждого угла V по формуле конического сечения
r0 = p0/(1 + e0*np.cos(V))
r1 = p1/(1 + e1*np.cos(V))
r2 = p2/(1 + e2*np.cos(V))
r3 = p3/(1 + e3*np.cos(V))
r4 = p4/(1 + e4*np.cos(V))

# Создание первого графика
plt.figure(1)
plt.title("Конические сечения с разными эксцентриситетами\n(при фиксированном p=3)")

# Построение всех кривых на полярной системе координат
plt.polar(V, r0, label=f'e={e0}')  # синяя линия - почти окружность
plt.polar(V, r1, label=f'e={e1}')  # оранжевая линия - эллипс
plt.polar(V, r2, label=f'e={e2}')  # зеленая линия - более вытянутый эллипс
plt.polar(V, r3, label=f'e={e3}')  # красная линия - сильно вытянутый эллипс
plt.polar(V, r4, label=f'e={e4}')  # фиолетовая линия - эллипс близкий к параболе

plt.grid("on")  # включение сетки
plt.legend(loc='upper right')  # добавление легенды
plt.ylim([0, 30])  # ограничение радиальной оси для лучшей видимости

##############################################################
# Второй набор кривых - демонстрация разных типов конических сечений

# Шестая кривая: окружность (e=0)
p00 = 1
e00 = 0  # эксцентриситет = 0 → окружность

# Седьмая кривая: окружность большего радиуса
p11 = 2
e11 = 0

# Восьмая кривая: парабола (e=1)
p22 = 3
e22 = 1  # эксцентриситет = 1 → парабола

# Девятая кривая: гипербола (e>1)
p33 = 3
e33 = 1.2

# Десятая кривая: гипербола с большим эксцентриситетом
p44 = 1
e44 = 2.1

# Используем тот же массив углов V
# Вычисление радиусов для второго набора кривых
r00 = p00/(1 + e00*np.cos(V))
r11 = p11/(1 + e11*np.cos(V))
r22 = p22/(1 + e22*np.cos(V))
r33 = p33/(1 + e33*np.cos(V))
r44 = p44/(1 + e44*np.cos(V))

# Создание второго графика
plt.figure(2)
plt.title("Разные типы конических сечений")

# Построение кривых на полярной системе координат
plt.polar(V, r00, label=f'p={p00}, e={e00} (окружность)')
plt.polar(V, r11, label=f'p={p11}, e={e11} (окружность)')
plt.polar(V, r22, label=f'p={p22}, e={e22} (парабола)')
plt.polar(V, r33, label=f'p={p33}, e={e33} (гипербола)')
plt.polar(V, r44, label=f'p={p44}, e={e44} (гипербола)')

plt.ylim([0, 10])  # ограничение радиальной оси для лучшей видимости
plt.grid("on")  # включение сетки
plt.legend(loc='upper right')  # добавление легенды
